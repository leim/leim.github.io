<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo搭建备忘 | MengLei Site</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="关于HexoHexo是一款轻量级的HTML静态博客生成器，由Node.js编写，支持Markdown撰写，运行速度快，可以一键部署到Github Pages等托管网站，同时支持插件，可以通过编写插件支持更加丰富的功能。
安装HexoHexo基于Node.js编写，安装Hexo之前，需要首先确保正确安装了Node.js、npm和Git（参见Node.js官网、Git官网），只要运行以下命令即可将He">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo搭建备忘">
<meta property="og:url" content="https://menglei.tk/2016/10/24/hexo/index.html">
<meta property="og:site_name" content="MengLei Site">
<meta property="og:description" content="关于HexoHexo是一款轻量级的HTML静态博客生成器，由Node.js编写，支持Markdown撰写，运行速度快，可以一键部署到Github Pages等托管网站，同时支持插件，可以通过编写插件支持更加丰富的功能。
安装HexoHexo基于Node.js编写，安装Hexo之前，需要首先确保正确安装了Node.js、npm和Git（参见Node.js官网、Git官网），只要运行以下命令即可将He">
<meta property="og:updated_time" content="2016-10-26T09:12:26.995Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo搭建备忘">
<meta name="twitter:description" content="关于HexoHexo是一款轻量级的HTML静态博客生成器，由Node.js编写，支持Markdown撰写，运行速度快，可以一键部署到Github Pages等托管网站，同时支持插件，可以通过编写插件支持更加丰富的功能。
安装HexoHexo基于Node.js编写，安装Hexo之前，需要首先确保正确安装了Node.js、npm和Git（参见Node.js官网、Git官网），只要运行以下命令即可将He">
  
    <link rel="alternate" href="/atom.xml" title="MengLei Site" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MengLei Site</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">A place to memorize something.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://menglei.tk"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/24/hexo/" class="article-date">
  <time datetime="2016-10-24T07:04:44.000Z" itemprop="datePublished">2016-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/memo/">memo</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Hexo搭建备忘
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="关于Hexo"><a href="#关于Hexo" class="headerlink" title="关于Hexo"></a>关于Hexo</h1><p>Hexo是一款轻量级的HTML静态博客生成器，由Node.js编写，支持Markdown撰写，运行速度快，可以一键部署到Github Pages等托管网站，同时支持插件，可以通过编写插件支持更加丰富的功能。</p>
<h1 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h1><p>Hexo基于Node.js编写，安装Hexo之前，需要首先确保正确安装了Node.js、npm和Git（参见<a href="https://nodejs.org/" target="_blank" rel="external">Node.js官网</a>、<a href="https://git-scm.com/" target="_blank" rel="external">Git官网</a>），只要运行以下命令即可将Hexo安装到电脑中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-cli -g</div></pre></td></tr></table></figure>
<h1 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h1><p>安装Hexo成功后，即可创建Hexo工程目录，执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo init demo</div><div class="line">cd demo</div><div class="line">npm install</div></pre></td></tr></table></figure>
<p>创建成功后，所包含的目录结构以及功能说明如下：</p>
<ul>
<li>_config.yml：网站配置信息。</li>
<li>packages.json：node_modules模块配置信息。</li>
<li>scaffolds：模板配置文件夹。</li>
<li>sources：用户资源，markdown和html会被render并保存至public文件夹供访问，其余文件被直接copy。其中_post文件夹中保存已发布的文章，_draft文件夹中保存草稿。</li>
<li>themes：主题文件夹。</li>
</ul>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>网站的所有配置信息保存在_config.yml文件中，可以视情况进行修改。</p>
<p>具体的配置说明可参见：<a href="https://hexo.io/zh-cn/docs/configuration.html。" target="_blank" rel="external">https://hexo.io/zh-cn/docs/configuration.html。</a></p>
<h1 id="申请Github-Pages空间"><a href="#申请Github-Pages空间" class="headerlink" title="申请Github Pages空间"></a>申请Github Pages空间</h1><p>在github上面创建一个和repository，名称为 <your user="" name="">.github.io，进入settings，选择options，下面有Github Pages的设置区域，可以选择默认的分支，并且能够自定义域名，这里我们将默认分支设置为master，同时添加自定义域名 <code>menglei.tk</code> ，添加自定义域名之后，下方 enforce https选项变得不可选，因为github无法对自定义域名提供https证书，此处我们可以通过其他方式来对https进行支持。这里填写完自定义域名之后，需要到域名的控制台，为其添加A记录，分别对应IP地址为 192.30.252.153 和 192.30.252.154 。</your></p>
<p>这样，所有访问自定义域名都会直接请求到该repo的master分支内根目录下的index.html文件。</p>
<h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p>Hexo可以支持git、heroku、Rsync、OpenShift、FTPSync等多种部署方式，如果这里没有提供您所需要的部署方式，可以直接将生成的public文件夹中所有的文件复制到所需要的server root文件夹。</p>
<p>我们这里采用的是git部署方式，首先需要添加 <code>hexo-deployer-git</code> ，执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p>然后在根目录下的_config.yml文件后面，增加以下配置信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">- type: git</div><div class="line">  repo: &lt;repo url&gt;   //远程repo地址</div><div class="line">  branch: &lt;branch name&gt;  //通过git提交到远程repo的分支</div><div class="line">  message: &lt;push message&gt;  //提交信息</div><div class="line">- type: git</div><div class="line">  repo: &lt;repo url2&gt;  // 可以支持同时部署到多个远程repo</div></pre></td></tr></table></figure>
<p>这里可以同时支持将其部署到多个repo中，也可以同时支持多种不同的repo类型。</p>
<h1 id="Sitemap："><a href="#Sitemap：" class="headerlink" title="Sitemap："></a>Sitemap：</h1><p>为了让搜索引擎更好的抓取网站内容，我们这里可以生成sitemap，首先需要执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install hexo-generator-baidu-sitemap --save   //生成百度sitemap</div><div class="line">npm install hexo-generator-sitemap --save    //生成google sitemap</div></pre></td></tr></table></figure>
<p>然后在根目录_config.yml文件末尾，添加以下配置信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sitemap:</div><div class="line">  path: sitemap.xml</div><div class="line">baidusitemap:</div><div class="line">  path: baidusitemap.xml</div></pre></td></tr></table></figure>
<p>这样，就可以通过 <a href="http://url/sitemap.xml" target="_blank" rel="external">http://url/sitemap.xml</a> 和 <a href="http://url/baidusitemap.xml" target="_blank" rel="external">http://url/baidusitemap.xml</a> 访问到网站的sitemap了，只要将以上地址提交到google和百度，即可加速搜索引擎抓取，优化网站的收录。</p>
<h1 id="Feed"><a href="#Feed" class="headerlink" title="Feed"></a>Feed</h1><p>为了给用户提供订阅，可以生成Feed文件，首先要执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-generator-feed --save</div></pre></td></tr></table></figure>
<p>然后在根目录_config.yml文件中，添加以下配置信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">feed:</div><div class="line">  type: atom</div><div class="line">  path: atom.xml</div><div class="line">  limit: 50</div><div class="line">  hub:</div></pre></td></tr></table></figure>
<p>这样，就可以通过 <a href="http://url/atom.xml" target="_blank" rel="external">http://url/atom.xml</a> 访问到网站的订阅Feed了。</p>
<h1 id="HTTPS配置"><a href="#HTTPS配置" class="headerlink" title="HTTPS配置"></a>HTTPS配置</h1><p>如果申请了Github Pages空间只好没有设置自定义域名，那么可以直接使用<your user="" name="">.github.io访问网站，并且可以启用enforce https选项强制所有用户使用https访问。但是设置自定义域名之后，必须采用一些其他方式，这里我们采用的是cloudflare免费CDN功能。</your></p>
<p>CloudFlare提供用户免费的CDN加速功能，并且支持HTTPS加速，所以，我们先申请一个cloudflare的账号，添加域名，然后到原域名供应商处将其dns服务器设置为cloudflare的dns服务器：kai.ns.cloudflare.com 和     naomi.ns.cloudflare.com 。然后将原来的dns record全都转移过来，同时，对于指向github pages的域名对应的两条A记录，启用CDN功能，这样，所有访问您github pages网站的请求，都会被cloudflare中转加速，免费的账户支持添加三条page rules，我们添加一条即可，配置域名，选择always use https，同时启用该条规则，这样，所有访问http的请求，都会被强制转向https，此处的https证书是cloudflare免费提供的，用户不必担心使用有效期，也不必承担费用。</p>
<p>同时，cloudflare还有很多高级功能可以免费使用，比如访问统计，防火墙，数据分析等，大家可以慢慢摸索。</p>
<h1 id="Ending"><a href="#Ending" class="headerlink" title="Ending"></a>Ending</h1><p>至此，所有的配置工作都已经完成，可以愉快的进行写作了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://menglei.tk/2016/10/24/hexo/" data-id="ciurq3yo50005vopb4hl0elcr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/备忘/">备忘</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/10/21/nginx/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Nginx安装配置备忘</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/memo/">memo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/server/">server</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPS/">HTTPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/备忘/">备忘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/资源/">资源</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTTPS/" style="font-size: 20px;">HTTPS</a> <a href="/tags/Nginx/" style="font-size: 20px;">Nginx</a> <a href="/tags/备忘/" style="font-size: 20px;">备忘</a> <a href="/tags/资源/" style="font-size: 10px;">资源</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/10/24/hexo/">Hexo搭建备忘</a>
          </li>
        
          <li>
            <a href="/2016/10/21/nginx/">Nginx安装配置备忘</a>
          </li>
        
          <li>
            <a href="/2016/10/18/certbot/">Let&#39;s Encrypt 配置过程记录</a>
          </li>
        
          <li>
            <a href="/2016/10/18/memo/">一些有用资源的备忘</a>
          </li>
        
          <li>
            <a href="/2016/10/16/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Meng Lei<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>